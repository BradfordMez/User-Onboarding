!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["form-schema"]=e():r["form-schema"]=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p="",e(0)}([function(r,e,t){"use strict";function n(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function o(r){return r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r}function i(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(m,[null].concat(e)))}function u(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(y.FormField,[null].concat(e)))}function c(r,e){var t=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],i=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],a="undefined"==typeof r?"undefined":o(r);a="object"===a&&Array.isArray(r)?"array":a;var u=e;if("function"==typeof u&&(u=e()),u instanceof m){var f=u.validate(r,t,i);return f.errorFactory=d.formError,f}if(u instanceof y.FormField){var f=u.validate(r,t,i);return f.errorFactory=p.formFieldError,f}if(Array.isArray(u)){if(Array.isArray(r)){var s=r.map(function(e,o){return c(e,u[0],[r].concat(n(t)),[o].concat(n(i)))}),l=s.every(function(r){return r.isValid});return{isValid:l,result:s}}return{isValid:!1,errors:["Expected array but got "+a+"."],errorFactory:p.formFieldError}}if("object"===("undefined"==typeof u?"undefined":o(u))){if("object"===a){var h=function(){var e=null;e=u[v]?Object.keys(r).reduce(function(e,o){return e[o]=c(r[o],u[v],[r].concat(n(t)),[o].concat(n(i))),e},{}):Object.keys(u).reduce(function(e,o){return e[o]=c(r[o],u[o],[r].concat(n(t)),[o].concat(n(i))),e},{});var o=Object.keys(e).every(function(r){return e[r].isValid});return{v:{isValid:o,result:e}}}();if("object"===("undefined"==typeof h?"undefined":o(h)))return h.v}return{isValid:!1,errors:["Expected object but got "+a+"."],errorFactory:p.formFieldError}}throw new Error("validateHelper(): Not supposed to reach here.")}function f(r){if(r.isValid)return null;if(r.result){var e=function(){var e=r.result;if(Array.isArray(e))return{v:e.map(f)};if("object"===("undefined"==typeof e?"undefined":o(e)))return{v:Object.keys(e).reduce(function(r,t){return r[t]=f(e[t]),r},{})};throw new Error("compactResult(): Not supposed to reach here.")}();if("object"===("undefined"==typeof e?"undefined":o(e)))return e.v}return r.errorFactory(r.errors,r.data)}function s(r,e){var t=c(r,e),n=f(t);return{isValid:t.isValid,errors:n}}var l=function(){function r(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.FormFieldError=e.FormError=e.ANY_KEY=e.Form=void 0,e.form=a,e.field=u,e.validate=s;var d=t(1),y=t(2),p=t(3),m=e.Form=function(){function r(e){i(this,r),this._schema=e}return l(r,[{key:"getSchema",value:function(){return this._schema}},{key:"required",value:function(){return this._isRequired=!0,this}},{key:"validate",value:function(r){if("undefined"==typeof r||null===r&&"object"===("undefined"==typeof r?"undefined":o(r)))return this._isRequired?{isValid:!1,errors:["The form is required."]}:{isValid:!0,errors:[]};for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];var i=c.apply(void 0,[r,this._schema].concat(t));return i}}]),r}(),v=e.ANY_KEY=Symbol("any key");e.FormError=d.FormError,e.FormFieldError=p.FormFieldError},function(r,e){"use strict";function t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function n(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function o(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function i(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(a,[null].concat(e)))}Object.defineProperty(e,"__esModule",{value:!0}),e.formError=i;var a=e.FormError=function(r){function e(r,o){t(this,e);var i=n(this,Object.getPrototypeOf(e).call(this));return i.name="FormError",i.reasons=r,i.data=o,Error.captureStackTrace(i,e),i}return o(e,r),e}(Error)},function(r,e){"use strict";function t(r){return r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r}function n(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},i=function(){function r(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});e.FormField=function(){function r(e){n(this,r),this._attrs=e,this._validators=[]}return i(r,[{key:"validators",value:function(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return this._validators=e,this}},{key:"required",value:function(){return this._isRequired=!0,this}},{key:"isRequired",value:function(){return this._isRequired}},{key:"getAttributes",value:function(){return this._attrs}},{key:"validate",value:function(r){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];if("undefined"==typeof r||null===r&&"object"===("undefined"==typeof r?"undefined":t(r)))return this._isRequired?{isValid:!1,errors:["The field is required."]}:{isValid:!0,errors:[]};var a=this._validators.reduce(function(e,t){var o=e.isValid,i=e.errors,a=t.apply(void 0,[r].concat(n)),u=a.isValid,c=a.error;return u||i.push(c),{isValid:o&&u,errors:i}},{isValid:!0,errors:[]});return o({},a,{data:r})}}]),r}()},function(r,e){"use strict";function t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function n(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function o(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function i(){for(var r=arguments.length,e=Array(r),t=0;r>t;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(a,[null].concat(e)))}Object.defineProperty(e,"__esModule",{value:!0}),e.formFieldError=i;var a=e.FormFieldError=function(r){function e(r,o){t(this,e);var i=n(this,Object.getPrototypeOf(e).call(this));return i.name="FormFieldError",i.reasons=r,i.data=o,Error.captureStackTrace(i,e),i}return o(e,r),e}(Error)}])});